# Oauth 2.0

요즘 사이트라면 대부분 사용하는 간편 로그인 기능, 이 간편 로그인이란 본인의 사이트에서 로그인하지 않아도 다른 큰 사이트(네이버, 카카오, 구글 등)에 이미 사용자가 회원가입 했을 확률이 높으니 귀찮게 다시 회원가입 시키지 말고 큰 회사에 로그인시켜 로그인 정보를 가져다가 사용하는 일련의 기능이다. 그럼 이 기능을 구현하기 위해서 어떻게 해야할 까.

위 기능을 잘 생각해보면 중요한 것은 다른 서비스의 회원 정보를 받아오는 것이다. 이를 위해서 사용하는 것이 바로 OAuth 2.0되겠다.

이 OAuth의 핵심은 access_token이다. 무작위 문자열인 이 토큰이 다른 사이트의 입장권 쯤 되는 역할을 한다. 그럼 이제 생각해보자. 이해하기 쉽게 트위치TV를 예로 들겠다.

1. 사용자는 트위치TV에서 간편 로그인 버튼을 클릭한다.
2. 간편 로그인 요청을 받은 트위치TV서버는 간편 로그인 서비스를 제공하는 회사 서버에 간편 로그인 요청을 한다.
3. 간편 로그인 요청을 받은 서비스 제공 회사는 트위치TV 서버에 로그인 페이지 URL을 전달하고, 트위치TV는 해당 URL로 페이지를 띄운다.
4. 사용자는 해당 페이지에서 아이디 비번으로 로그인을 한다. 이때 로그인이 성공했을 시에 Authorization code를 발급받고 callback url로 전달해준다.
5. 코드를 전달받은 트위치TV 서버는 해당 코드로 간편 로그인 서버에 Access Token을 요청한다.
6. 간편 로그인 서버는 토큰을 발급해주고, 사용자를 기억하기 위해선 해당 토큰을 db나 웹 스토리지에 저장해서 쓴다.
7. 이렇게 까지가 로그인이고 사용자 정보를 사용하기 위해서 access Token으로 간편 로그인하는 회사의 리소스 서버에 요청해서 받아 쓴다.

간편로그인 이후발급 되는 토큰에 대해서는 서비스 운영측에서 직접 관리해줘야한다.
