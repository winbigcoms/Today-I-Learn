# 실행컨텍스트

## 소스코드 타입

1. 전역 코드
2. 함수 코드
3. eval 코드
4. 모듈 코드

## 소스코드의 평가와 실행

모든 소스 코드는 먼저 평가를 한다. 이때 실행 컨텍스트가 생기고 그 곳에 식별자를 등록한다.

브라우저 실행(전역 객체 생성) > 평가 > 실행

## 실행 컨텍스트 스택

전역 코드의 실행으로 스택에 쌓인다. 함수는 호출시 쌓인다.

실행 순서의 관리, 식별자의 검색 을 위해서 필요하다.

쌓이는 순서

스택에 푸쉬 > 평가 > 렉시컬 환경 생성  > 실행 (할당)

thisbinding은 환경 레코드 상에서 실행된다. 환경 레코드의 내부슬롯 [[ThisValue]]가 존재, 호출 방식에 따라 this 바인딩



# 클로저

중첩함수 구조인 경우 외부함수보다 중첩함수가 더 오래 살아남는경우(return으로 반환한경우) 중첩함수가 외부 함수의 식별자를 참조하면 클로저라고한다. 단 이론상 모든 함수는 클로저이다.;

중첩함수라고 하더라도 중첩함수가 외부함수의 변수를 참조하고 있지 않는다면 클로저라 하지 않고 외부 함수를 바라보고 있지 않는다.



## 클로저의 활용

상태의 안전한 유지를 위해서 사용한다.

1. 즉시실행함수
2. 유지해야할 변수를 즉시 실행 함수 내부에서 선언
3. return 중첩함수는 해야할 동작을 정의

```
const dd = (function(){
	보호할 변수 = ㅇㅇ;
	return function(){
		보호할 변수로 동작
	};
});
dd();
```

```
const ff = (function(){
	보호 변수 = OTL;
	const ㅇㄴㅁ = function(){할일}
	const ㅁㄴㅇ = function(){할일}
	return {ㅇㄴㅁ,ㅁㄴㅇ};
});

ff.ㅇㄴㅁ()
ff.ㅁㄴㅇ()
```

