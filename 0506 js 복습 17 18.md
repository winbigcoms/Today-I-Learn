프로퍼티 어트리뷰트

### 내부슬롯과 내부 메소드

내부슬롯 : 프로퍼티

내부메소드 : 메소드

개발자들이 접근할 수 없는 자바스크립트 엔진의 내부 로직
이 값들은 직접접근할 수 는 없고 간접적으로 접근가능하다.

[[Prototype]]



###  프로퍼티 어트리뷰트와 프로퍼티 디스크립터 객체

프로퍼티 어트리뷰트 : 자바스크립트 엔진이 프로퍼티를 생성할 때 프로퍼티의 상태를 나타내는 내부 값 그 값으로는 Value Writable Enumerable Configurable set get 가 존재한다.

- 데이터프로퍼티에서는 Value Writable Enumerable Configurable,

- 접근자프로퍼티에서는 Enumerable Configurable set get 이 존재한다.

- 이 모든것들은 내부 슬롯이기 때문에 직접적으로 접근할 수 없다.

- 그래서 Object.getOwnPropertyDescriptor 메소드를 사용하여 간접적으로 확인할 수는 있다.

프로퍼티 디스크립터 **객체** : Object.getOwnPropertyDescriptor를 사용해서 나온 결과값 그 결과값은 객체로 도출된다.



### 데이터 프로퍼티와 접근자 프로퍼티

프로퍼티는 데이터 프로퍼티와 접근자 프로퍼티로 구분할 수 있다.

- 데이터 프로퍼티(data property)

  키와 값으로 구성된 일반적인 프로퍼티다. 지금까지 살펴본 모든 프로퍼티는 데이터 프로퍼티다.

- 접근자 프로퍼티(accessor property)

  자체적으로는 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나 저장할 때 호출되는 접근자 함수(accessor function)로 구성된 프로퍼티다.



#### 데이터 프로퍼티

객체를 생성했을때는 기본값을 true로 가지고 있다.

| 프로퍼티 어트리뷰트 | 프로퍼티 디스크립터 객체의 프로퍼티 | 설명                                                         |
| :------------------ | :---------------------------------- | :----------------------------------------------------------- |
| [[Value]]           | value                               | - 프로퍼티 키를 통해 프로퍼티 값에 접근하면 반환되는 값이다. - 프로퍼티 키를 통해 프로퍼티 값을 변경하면 [[Value]]에 값을 재할당한다. 이때 프로퍼티가 없으면 프로퍼티를 동적 생성하고 생성된 프로퍼티의 [[Value]]에 값을 저장한다. |
| [[Writable]]        | writable                            | - 프로퍼티 값의 변경 가능 여부를 나타내며 불리언 값을 갖는다. - [[Writable]]의 값이 false인 경우, 해당 프로퍼티의 [[Value]]의 값을 변경할 수 없는 읽기 전용 프로퍼티가 된다. |
| [[Enumerable]]      | enumerable                          | - 프로퍼티의 열거 가능 여부를 나타내며 불리언 값을 갖는다. - [[Enumerable]]의 값이 false인 경우, 해당 프로퍼티는 for…in 문이나 Object.keys 메소드 등으로 열거할 수 없다. |
| [[Configurable]]    | configurable                        | - 프로퍼티의 재정의 가능 여부를 나타내며 불리언 값을 갖는다. - [[Configurable]]의 값이 false인 경우, 해당 프로퍼티의 삭제, 프로퍼티 어트리뷰트 값의 변경이 금지된다. 단, [[Writable]]이 true인 경우, [[Value]]의 변경과 [[Writable]]을 false로 변경하는 것은 허용된다.([“16.5.2. 객체 밀봉”](https://poiemaweb.com/fastcampus/property-definition#52-객체-밀봉)과 [“16.5.3. 객체 동결”](https://poiemaweb.com/fastcampus/property-definition#53-객체-동결) 참고) |

```javascript
const person = {
  name: 'Lee'
};

// 프로퍼티 어트리뷰트 정보를 제공하는 프로퍼티 디스크립터 객체를 취득한다.
console.log(Object.getOwnPropertyDescriptor(person, 'name'));
// {value: "Lee", writable: true, enumerable: true, configurable: true}
```



#### 접근자 프로퍼티

자체적인 값을 가지고 있지 않고 다른 데이터 프로퍼티를 이용해서 값을 읽거나 저장한다.

| 프로퍼티 어트리뷰트 | 프로퍼티 디스크립터 객체의 프로퍼티 | 설명                                                         |
| :------------------ | :---------------------------------- | :----------------------------------------------------------- |
| [[Get]]             | get                                 | 접근자 프로퍼티를 통해 데이터 프로퍼티의 값을 읽을 때 호출되는 접근자 함수이다. 즉, 접근자 프로퍼티 키로 프로퍼티 값에 접근하면 프로퍼티 어트리뷰트 [[Get]]의 값, 즉 getter 함수가 호출되고 그 결과가 프로퍼티 값으로 반환된다. |
| [[Set]]             | set                                 | 접근자 프로퍼티를 통해 데이터 프로퍼티의 값을 저장할 때 호출되는 접근자 함수이다. 즉, 접근자 프로퍼티 키로 프로퍼티 값을 저장하면 프로퍼티 어트리뷰트 [[Set]]의 값, 즉 setter 함수가 호출되고 그 결과가 프로퍼티 값으로 저장된다. |
| [[Enumerable]]      | enumerable                          | 데이터 프로퍼티의 [[Enumerable]]와 같다.                     |
| [[Configurable]]    | configurable                        | 데이터 프로퍼티의 [[Configurable]]와 같다.                   |



### 프로퍼티정의

- Object.defineProperty 

- Object.defineProperties 

| 프로퍼티 디스크립터 객체의 프로퍼티 | 대응하는 프로퍼티 어트리뷰트 | 디스크립터 객체의 프로퍼티 누락 시의 기본값 |
| :---------------------------------- | :--------------------------- | :------------------------------------------ |
| value                               | [[Value]]                    | undefined                                   |
| get                                 | [[Get]]                      | undefined                                   |
| set                                 | [[Set]]                      | undefined                                   |
| writable                            | [[Writable]]                 | false                                       |
| enumerable                          | [[Enumerable]]               | false                                       |
| configurable                        | [[Configurable]]             | false                                       |



### 객체변경방지

자바스크립트는 객체의 변경을 방지할 수 있는 다양한 메소드를 제공한다. 객체 변경 방지 메소드 들은 객체의 변경을 금지하는 강도가 다르다.

| 구분           | 메소드                   | 프로퍼티 추가 | 프로퍼티 삭제 | 프로퍼티 값 읽기 | 프로퍼티 값 쓰기 | 프로퍼티 어트리뷰트 재정의 |
| :------------- | :----------------------- | :-----------: | :-----------: | :--------------: | :--------------: | :------------------------: |
| 객체 확장 금지 | Object.preventExtensions |       ✕       |       ○       |        ○         |        ○         |             ○              |
| 객체 밀봉      | Object.seal              |       ✕       |       ✕       |        ○         |        ○         |             ✕              |
| 객체 동결      | Object.freeze            |       ✕       |       ✕       |        ○         |        ✕         |             ✕              |



#### 객체 확장금지

- Object.preventExtensions

**확장이 금지된 객체는 프로퍼티 추가가 금지된다**. 

확장이 금지된 객체인지 여부는 Object.isExtensible 메소드로 확인 할 수 있다.



#### 객체 밀봉

Object.seal 메소드는 객체를 밀봉한다. 객체 밀봉(seal)이란 프로퍼티 추가 및 삭제와 프로퍼티 어트리뷰트 재정의 금지를 의미한다. 즉, **밀봉된 객체는 읽기와 쓰기만 가능하게 된다.**

밀봉된 객체인지 여부는 Object.isSealed 메소드로 확인 할 수 있다.



#### 객체 동결

Object.freeze 메소드는 객체를 동결한다. 객체 동결(freeze)이란 프로퍼티 추가 및 삭제와 프로퍼티 어트리뷰트 재정의 금지, 프로퍼티 값 갱신 금지를 의미한다. 즉, **동결된 객체는 읽기만 가능하게 된다.**

동결된 객체인지 여부는 Object.isFrozen 메소드로 확인 할 수 있다.



#### 불변객체

Object.freeze 메소드로 객체를 동결하여도 중첩 객체까지 동결할 수 없다.

모든 프로퍼티에 대해 재귀적으로 Object.freeze 메소드를 호출해야 한다.



+++

## 생성자 함수에 의한 객체 생성

### Object 생성자 함수

생성자 함수란? new연산자와 함께 호출하여 객체를 생성하는 함수, 생성된 객체를 인스턴스라고 한다.

new 연산자와 함께 Object 생성자 함수를 호출하면 빈 객체를 생성하여 반환한다. 



### 생성자 함수

#### 객체 리터럴에 의한 객체 생성 방식의 문제점

객체 리터럴로 객체를 만들면 직관적이고 간단하게 만들 수 있다.
하지만 한번에 하나의 객체만을 생성하기 때문에 동일한 프로퍼티를 갖는 여러개의 객체를 만들때는 비효율적이다.



#### 생성자 함수에 의한 객체 생성 방식의 장점

동일한 프로퍼티를 가지는 객체를 여러개 생성할 경우 효율적으로 생성할 수 있다.

- this

  this는 객체 자신의 프로퍼티나 메소드를 참조하기 위한 자기 참조 변수(self-referencing variable)이다. **this가 가리키는 값, 즉 this 바인딩은 함수 호출 방식에 따라 동적으로 결정된다.**

| 함수 호출 방식       | this가 가리키는 값(this 바인딩)        |
| :------------------- | :------------------------------------- |
| 일반 함수로서 호출   | 전역 객체                              |
| 메소드로서 호출      | 메소드를 호출한 객체(마침표 앞의 객체) |
| 생성자 함수로서 호출 | 생성자 함수가 (미래에) 생성할 인스턴스 |

 일반 함수와 동일한 방법으로 생성자 함수를 정의하고 **new 연산자와 함께 호출하면 해당 함수는 생성자 함수로 동작한다.**

만약 **new 연산자**와 함께 생성자 함수를 호출하지 않으면 생성자 함수가 아니라 일반 함수로 동작한다.



#### 생성자 함수의 인스턴스 생성 과정

**인스턴스를 생성**하는 것과 **생성된 인스턴스를 초기화(인스턴스 프로퍼티 추가 및 초기값 할당)**

**1. 인스턴스 생성과 this 바인딩**

바인딩 : this가 무엇을 바라볼지 결정

식별자와 값을 연결하는 과정을 의미한다. 예를 들어, 변수 선언은 변수 이름(식별자)과 확보된 메모리 공간의 주소를 바인딩하는 것이다.



**2. 인스턴스 초기화**

생성자 함수에 기술되어 있는 코드가 한줄씩 실행되어 this에 바인딩되어 있는 인스턴스를 초기화한다. 즉, this에 바인딩되어 있는 인스턴스에 프로퍼티나 메소드를 추가하고 생성자 함수가 인수로 전달받은 초기값을 인스턴스 프로퍼티에 할당하여 초기화하거나 고정값을 할당한다. 



**3. 인스턴스 반환**

생성자 함수 내부의 모든 처리가 끝나면 완성된 인스턴스가 바인딩된 this가 암묵적으로 반환된다.