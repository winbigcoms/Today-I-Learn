# 기술면접 준비 - HTML,CSS,JS

## 브라우저 렌더링 원리

브라우저의 기본 구조
- 사용자 인터페이스: 주소창, 이전-다음 페이지 버튼 등등
- 브라우저 엔진
- 렌더링 엔진
- 통신
- UI백엔드
- 자바스크립트 해석기
- 자료 저장소

### 랜더링 엔진
랜더링 엔진의 역할은 사용자 인터페이스의 주소창을 통해 요청한 도메인혹은 주소를 요청하여 받은 내용을 브라우저에 그리는 일이다. 기본적으로 XML, HTML, 이미지를 표시할 수 있다.

렌더링 엔진의 종류로는 게코, 웹킷 등이 있다.

랜더링 엔진의 동작 과정은 다음과 같다.

응답 받은 html로 DOM트리 구축을 위해 HTML을 파싱한다. 여기서 파싱이란 하나의 프로그램을 런타임에 동작할 수 있는 포멧으로 분석하고 변환하는 것이다. 즉 html을 브라우저가 이해하고 사용할 수 있게 만드는 과정이고 파싱 이후 응답 받은 html문서를 가지고 의미를 가지는 최소 단위 인 토큰으로 변환한다. 이 토큰의 정의는 w3c에 의해 지정되었다. 토큰화 된 html을 가지고 해당 속성 및 규칙을 정의하는 객체로 변환한다. 마지막으로 html마크업에 정의된 태그 간의 관계(부모, 자식 등)를 가지고 트리 구조로 연결합니다. 이처럼 css또한 CSSOM을 만들어 DOM과 CSSOM을 결합하여 랜더트리를 만듭니다.

하지만 이 랜더트리를 만드는 과정이 한번에 다 되는 것은 아닙니다. script같은 문을 만나면 잠시 트리만드는 걸 멈추고 js 파일을 파싱하여 옵니다. 그러나 defer같은 속성을 이용하게 되면, 문서 파싱을 멈추지 않고 문서 파싱 이후 스크립트를 실행합니다.

결국 랜더 트리가 만들어지면, 랜더링 엔진은 레이아웃 과정에 들어갑니다. 리플로우 과정이라고도 불리는 이 과정은 랜더트리 요소들의 위치를 잡아주는 과정입니다. 위치를 다 계산한 렌더링 엔진은 이제 화면에 요소를 그리기 시작합니다. 이를 페인팅 과정이라 합니다. 

## 호이스팅 이란?
호이스팅이란 코드 실행전 선언된 변수와 함수 선언문, 클래스 등 이 해당 스코프의 최 상단에서 선언된 것 처럼 보이는 현상을 말한다. var키워드의 경우 문제가 없지만, let,const,class는 이제 자바스크립트가 에러를 던지기 때문에 안그래 보이지만, 호이스팅은 일어난다.

자바스크립트가 동작할 때, 두 가지 시점이 존재합니다. 하나는 평가, 하나는 실행(런타임)입니다.

자바스크립트는 평가 단계에서 실행 컨텍스트를 생성합니다. 전역 실행 컨텍스트를 시작으로 해당 컨텍스트의 렉시컬 환경을 만들어 갑니다. 렉시컬 환경이란 식별자와 식별자에 바인딩 된 값, 그리고 그 상위 스코프에 대한 참조를 기록하는 환경으로, 선언된 변수 등이 기록됩니다. 이때 컨텍스트에 선언된 변수, 함수 선언문은 컨텍스트에 속하게 됩니다.  재밋는 점은 var키워드 선언 변수, 함수 선언문과 let,const,class등이 선언된 변수는 다른 곳에 저장되어 let,const,class를 선언 이전에 호출하면 에러를 내게합니다. 결국 호이스팅은 일어나지만 접근할 수 없는 TDZ(temperal dead zone)이 생성되게 되는 겁니다.

여튼 호이스팅은 자바스크립트가 평가와 실행 단계로 구분되어 동작하기에 생기며, 변수,함수혹은 클래스가 속한 스코프의 최 상단에 선언된 것 처럼 보이는 현상이라 할 수 있겠습니다.